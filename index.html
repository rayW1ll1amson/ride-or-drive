<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;700&family=Inter:wght@400;600&display=swap" rel="stylesheet">
  <title>Ride or Drive | Precision Commute</title>
  <style>
    :root { --bg: #F8F9FA; --card: #FFFFFF; --text: #000000; --dim: rgba(0,0,0,0.4); }
    [data-theme="dark"] { --bg: #000000; --card: #111111; --text: #FFFFFF; --dim: rgba(255,255,255,0.4); }
    body { font-family: 'Inter', sans-serif; background-color: var(--bg); color: var(--text); transition: 0.2s; overflow-x: hidden; }
    .heading-font { font-family: 'Space Grotesk', sans-serif; }
    .screen { display: none; min-height: 100vh; }
    .screen.active { display: flex; flex-direction: column; }
    .card-border { border: 2px solid var(--text); box-shadow: 4px 4px 0px 0px var(--text); }
    .tap-active:active { transform: translate(2px, 2px); box-shadow: 0px 0px 0px 0px var(--text); }
    .loading-shimmer { background: linear-gradient(90deg, #eeeeee 25%, #dddddd 50%, #eeeeee 75%); background-size: 200% 100%; animation: shimmer 1.5s infinite; }
    @keyframes shimmer { 0% { background-position: 200% 0; } 100% { background-position: -200% 0; } }
  </style>
</head>
<body data-theme="light">

  <div id="screen-home" class="screen active p-8">
    <header class="mt-8 mb-10 flex justify-between items-start">
      <div>
        <h1 class="heading-font text-5xl font-bold tracking-tighter uppercase italic leading-none">RIDE<br><span class="opacity-30">/</span>DRIVE</h1>
        <p class="text-[10px] tracking-[0.3em] uppercase mt-4 font-bold opacity-40">Live Master v5.0</p>
      </div>
      <button onclick="toggleTheme()" class="card-border bg-transparent p-2 text-xl tap-active">üåô</button>
    </header>

    <div class="space-y-6">
      <button onclick="nav('screen-driver-cats')" class="tap-active card-border w-full bg-card p-8 flex items-center justify-between group">
        <div class="text-left">
          <span class="text-xs font-bold uppercase tracking-widest opacity-30">Selection A</span>
          <h2 class="heading-font text-3xl font-bold uppercase">Driver</h2>
        </div>
        <span class="text-4xl grayscale group-hover:grayscale-0 transition">üöó</span>
      </button>
      <button onclick="nav('screen-passenger')" class="tap-active card-border w-full bg-card p-8 flex items-center justify-between group">
        <div class="text-left">
          <span class="text-xs font-bold uppercase tracking-widest opacity-30">Selection B</span>
          <h2 class="heading-font text-3xl font-bold uppercase">Passenger</h2>
        </div>
        <span class="text-4xl grayscale group-hover:grayscale-0 transition">üí∫</span>
      </button>
    </div>
  </div>

  <div id="screen-driver-cats" class="screen p-8">
    <button onclick="nav('screen-home')" class="mb-10 text-xs font-bold uppercase tracking-widest border-b-2 border-current inline-block">‚Üê Return</button>
    <h2 class="heading-font text-4xl font-bold uppercase mb-8 leading-tight">Driver<br>Categories</h2>
    <div class="grid gap-6">
      <button onclick="showSub('productivity')" class="tap-active card-border bg-card p-6 text-left font-bold uppercase tracking-tight text-lg">01. Productivity & Learning</button>
      <button onclick="showSub('life-admin')" class="tap-active card-border bg-card p-6 text-left font-bold uppercase tracking-tight text-lg">02. Life Admin & Goals</button>
      <button onclick="showSub('wellbeing')" class="tap-active card-border bg-card p-6 text-left font-bold uppercase tracking-tight text-lg">03. Mental Wellbeing</button>
    </div>
  </div>

  <div id="screen-driver-sub" class="screen p-8">
    <div class="flex justify-between items-center mb-10">
      <button onclick="nav('screen-driver-cats')" class="text-xs font-bold uppercase tracking-widest border-b-2 border-current inline-block">‚Üê Back</button>
      <button id="btn-refresh" class="text-[10px] font-black uppercase tracking-widest opacity-60 hover:opacity-100">‚Ü∫ Refresh List</button>
    </div>
    <h2 id="sub-title" class="heading-font text-4xl font-bold uppercase mb-2">Fetching</h2>
    <p class="text-[10px] uppercase tracking-widest opacity-40 mb-8">Top Free Discoveries</p>
    <div id="content-container" class="grid gap-4"></div>
  </div>

  <div id="screen-passenger" class="screen p-8">
    <button onclick="nav('screen-home')" class="mb-10 text-xs font-bold uppercase tracking-widest border-b-2 border-current inline-block">‚Üê Return</button>
    <h2 class="heading-font text-4xl font-bold uppercase mb-8">Passenger<br>Visuals</h2>
    <div class="card-border bg-card p-8 text-center">
      <h3 class="text-2xl font-bold heading-font uppercase italic">Visual Learning Hub</h3>
      <a href="https://www.khanacademy.org" target="_blank" class="mt-8 block bg-current text-card py-4 font-bold uppercase text-xs tracking-widest">Launch Library</a>
    </div>
  </div>

  <script>
    let activeCat = null;
    const subCats = {
      'productivity': [
        { name: 'Immersive Audiobooks', api: 'https://itunes.apple.com/search?term=audiobook+literature&entity=podcast&limit=10' },
        { name: 'Educational Podcasts', api: 'https://itunes.apple.com/search?term=ted+talks&entity=podcast&limit=10' },
        { name: 'Audio Language Learning', api: 'https://itunes.apple.com/search?term=language+learning&entity=podcast&limit=10' }
      ],
      'life-admin': [
        { name: 'Voice Dictation', url: 'https://otter.ai', desc: 'Top Tool for Transcription' },
        { name: 'Morning Role Transition', url: 'https://insighttimer.com/meditation-topics/morning', desc: 'Curated Morning Transitions' }
      ],
      'wellbeing': [
        { name: 'Curated Music Therapy', api: 'https://itunes.apple.com/search?term=ambient+lofi&entity=podcast&limit=10' },
        { name: 'Social Connection', api: 'https://itunes.apple.com/search?term=the+moth+storytelling&entity=podcast&limit=10' }
      ]
    };

    function nav(id) {
      document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
      document.getElementById(id).classList.add('active');
      window.scrollTo(0,0);
    }

    function toggleTheme() {
      const b = document.body;
      b.setAttribute('data-theme', b.getAttribute('data-theme') === 'light' ? 'dark' : 'light');
    }

    async function showSub(k) {
      activeCat = k;
      const container = document.getElementById('content-container');
      const title = document.getElementById('sub-title');
      title.innerText = k.toUpperCase();
      container.innerHTML = `<div class="h-16 loading-shimmer card-border opacity-20"></div>`.repeat(5);
      nav('screen-driver-sub');
      await fetchAll();
    }

    async function fetchAll() {
      const container = document.getElementById('content-container');
      let html = '';
      for (let sub of subCats[activeCat]) {
        html += `<div class="mt-4 mb-2 text-[10px] font-black uppercase tracking-widest opacity-40">${sub.name}</div>`;
        if (sub.api) {
          try {
            // Using a CORS proxy for "One-Pass" web functionality
            const res = await fetch(`https://api.allorigins.win/get?url=${encodeURIComponent(sub.api)}`);
            const data = await res.json();
            const items = JSON.parse(data.contents).results || [];
            items.slice(0, 3).forEach(item => {
              html += `
                <a href="${item.trackViewUrl}" target="_blank" class="tap-active card-border bg-card p-4 block no-underline flex justify-between items-center mb-2">
                  <span class="text-xs font-bold uppercase truncate pr-4">${item.trackName || "Free Resource"}</span>
                  <span class="text-sm">‚Üó</span>
                </a>`;
            });
          } catch(e) { html += `<div class="text-[10px] opacity-50 p-4 card-border italic">Network restricted. Tap to try again.</div>`; }
        } else {
          html += `<a href="${sub.url}" target="_blank" class="tap-active card-border bg-card p-4 block no-underline flex justify-between items-center">
            <span class="text-xs font-bold uppercase">${sub.name}</span><span class="text-sm">‚Üó</span></a>`;
        }
      }
      container.innerHTML = html;
    }

    document.getElementById('btn-refresh').onclick = fetchAll;
  </script>
</body>
</html>
